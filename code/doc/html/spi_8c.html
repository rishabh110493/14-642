<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>18-349 Kernel: spi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">18-349 Kernel
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_dc43877d82dd332f9fb2071fcca799d6.html">kernel</a></li><li class="navelem"><a class="el" href="dir_3dd30a497388ee684638f120a124721c.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">spi.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SPI implementation on rpi 2.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="spi_8h_source.html">spi.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="gpio_8h_source.html">gpio.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="kstdint_8h_source.html">kstdint.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="BCM2836_8h_source.html">BCM2836.h</a>&gt;</code><br/>
<code>#include &quot;<a class="el" href="printk_8h_source.html">printk.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a70770bf63c404670f18b1b292838aadf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70770bf63c404670f18b1b292838aadf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI0_CS_REG</b>&#160;&#160;&#160;(volatile <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *)(<a class="el" href="BCM2836_8h.html#afe180326329f8988b33be9789eca7d20">MMIO_BASE_PHYSICAL</a> + 0x204000)</td></tr>
<tr class="separator:a70770bf63c404670f18b1b292838aadf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1fbc5f3a9cc59b45450509e05ba2f7e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1fbc5f3a9cc59b45450509e05ba2f7e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI0_FIFO_REG</b>&#160;&#160;&#160;(volatile <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *)(<a class="el" href="BCM2836_8h.html#afe180326329f8988b33be9789eca7d20">MMIO_BASE_PHYSICAL</a> + 0x204004)</td></tr>
<tr class="separator:ad1fbc5f3a9cc59b45450509e05ba2f7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66fdddccb5760f4394aaf759f29073e9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a66fdddccb5760f4394aaf759f29073e9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI0_CLK_REG</b>&#160;&#160;&#160;(volatile <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *)(<a class="el" href="BCM2836_8h.html#afe180326329f8988b33be9789eca7d20">MMIO_BASE_PHYSICAL</a> + 0x204008)</td></tr>
<tr class="separator:a66fdddccb5760f4394aaf759f29073e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0bb3b7a3e66157b33c70bd5193f2732"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0bb3b7a3e66157b33c70bd5193f2732"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI0_DLEN_REG</b>&#160;&#160;&#160;(volatile <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *)(<a class="el" href="BCM2836_8h.html#afe180326329f8988b33be9789eca7d20">MMIO_BASE_PHYSICAL</a> + 0x20400C)</td></tr>
<tr class="separator:aa0bb3b7a3e66157b33c70bd5193f2732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a706d630753020bc744b25e91d2d3dda1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a706d630753020bc744b25e91d2d3dda1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI0_LTOH_REG</b>&#160;&#160;&#160;(volatile <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *)(<a class="el" href="BCM2836_8h.html#afe180326329f8988b33be9789eca7d20">MMIO_BASE_PHYSICAL</a> + 0x204010)</td></tr>
<tr class="separator:a706d630753020bc744b25e91d2d3dda1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad701faca47f8e95d62c1912a12a17439"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad701faca47f8e95d62c1912a12a17439"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI0_DC_REG</b>&#160;&#160;&#160;(volatile <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *)(<a class="el" href="BCM2836_8h.html#afe180326329f8988b33be9789eca7d20">MMIO_BASE_PHYSICAL</a> + 0x204014)</td></tr>
<tr class="separator:ad701faca47f8e95d62c1912a12a17439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b4bb944d3976cf265d9bda59273e600"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0b4bb944d3976cf265d9bda59273e600"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_LEN_LONG</b>&#160;&#160;&#160;25</td></tr>
<tr class="separator:a0b4bb944d3976cf265d9bda59273e600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb827e49f238b872ea279951aa89bbeb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afb827e49f238b872ea279951aa89bbeb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_DMA_LEN</b>&#160;&#160;&#160;24</td></tr>
<tr class="separator:afb827e49f238b872ea279951aa89bbeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e68147932f116fdec736a4f6be9bbbf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4e68147932f116fdec736a4f6be9bbbf"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CSPOL2</b>&#160;&#160;&#160;23</td></tr>
<tr class="separator:a4e68147932f116fdec736a4f6be9bbbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2151aecf191103d504f698479203a09a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2151aecf191103d504f698479203a09a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CSPOL1</b>&#160;&#160;&#160;22</td></tr>
<tr class="separator:a2151aecf191103d504f698479203a09a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee79c2138dc569a832c1b1511a6e2a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abee79c2138dc569a832c1b1511a6e2a2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CSPOL0</b>&#160;&#160;&#160;21</td></tr>
<tr class="separator:abee79c2138dc569a832c1b1511a6e2a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea29c1ddac1fe51d8aeb9e6af8c58b6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeea29c1ddac1fe51d8aeb9e6af8c58b6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_RX</b>&#160;&#160;&#160;20</td></tr>
<tr class="separator:aeea29c1ddac1fe51d8aeb9e6af8c58b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8ff1af57608ce5331f758919885416e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8ff1af57608ce5331f758919885416e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_RXR</b>&#160;&#160;&#160;19</td></tr>
<tr class="separator:ae8ff1af57608ce5331f758919885416e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78498dabbb7fb024923b06417117f374"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78498dabbb7fb024923b06417117f374"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_TXD</b>&#160;&#160;&#160;18</td></tr>
<tr class="separator:a78498dabbb7fb024923b06417117f374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8dd0885c0cac7940ee57cf8d7f4e4a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b8dd0885c0cac7940ee57cf8d7f4e4a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_RXD</b>&#160;&#160;&#160;17</td></tr>
<tr class="separator:a2b8dd0885c0cac7940ee57cf8d7f4e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a8cb27984c9f783b6b21b0c24afa23f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a8cb27984c9f783b6b21b0c24afa23f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_DONE</b>&#160;&#160;&#160;16</td></tr>
<tr class="separator:a8a8cb27984c9f783b6b21b0c24afa23f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a98eb91046deef995d2abd86604adc0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a98eb91046deef995d2abd86604adc0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_LEN</b>&#160;&#160;&#160;13</td></tr>
<tr class="separator:a8a98eb91046deef995d2abd86604adc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f40d420c379337e633e4fd9e68104d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a93f40d420c379337e633e4fd9e68104d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_REN</b>&#160;&#160;&#160;12</td></tr>
<tr class="separator:a93f40d420c379337e633e4fd9e68104d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ca70ea116e5f5b19992a9d4b2af98d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55ca70ea116e5f5b19992a9d4b2af98d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_ADCS</b>&#160;&#160;&#160;11</td></tr>
<tr class="separator:a55ca70ea116e5f5b19992a9d4b2af98d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba254fdda5f021255a61327914d22e5a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba254fdda5f021255a61327914d22e5a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_INTR</b>&#160;&#160;&#160;10</td></tr>
<tr class="separator:aba254fdda5f021255a61327914d22e5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde9793a49c82800b6e17796b496ba86"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acde9793a49c82800b6e17796b496ba86"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_INTD</b>&#160;&#160;&#160;9</td></tr>
<tr class="separator:acde9793a49c82800b6e17796b496ba86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a302b75d2f1abcdd8a602ec1fa0409c84"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a302b75d2f1abcdd8a602ec1fa0409c84"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_DMAEN</b>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a302b75d2f1abcdd8a602ec1fa0409c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9346c416eece7cb163ba11e9e7ee6fef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9346c416eece7cb163ba11e9e7ee6fef"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_TA</b>&#160;&#160;&#160;7</td></tr>
<tr class="separator:a9346c416eece7cb163ba11e9e7ee6fef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4e634a1421e9d4e4a9a24ede1d556e7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4e634a1421e9d4e4a9a24ede1d556e7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CSPOL</b>&#160;&#160;&#160;6</td></tr>
<tr class="separator:ad4e634a1421e9d4e4a9a24ede1d556e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6aa0dc66b1aa45ef84d9403d61eed6d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae6aa0dc66b1aa45ef84d9403d61eed6d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CLEAR_RX</b>&#160;&#160;&#160;5</td></tr>
<tr class="separator:ae6aa0dc66b1aa45ef84d9403d61eed6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb5018eaba86edc1ea9544abcf110ad1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb5018eaba86edc1ea9544abcf110ad1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CLEAR_TX</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:adb5018eaba86edc1ea9544abcf110ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8e335b1f808bd7408d2aef2377adcb1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad8e335b1f808bd7408d2aef2377adcb1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CPOL</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ad8e335b1f808bd7408d2aef2377adcb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49e8927a636f45641d6231ac63b9e598"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49e8927a636f45641d6231ac63b9e598"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CPHA</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a49e8927a636f45641d6231ac63b9e598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a974ab9c400b948c44c71a01c0f07ecc3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a974ab9c400b948c44c71a01c0f07ecc3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CS1</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a974ab9c400b948c44c71a01c0f07ecc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a75b0db84a43dd988ae3593f7291bb3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a75b0db84a43dd988ae3593f7291bb3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPI_CS0</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a6a75b0db84a43dd988ae3593f7291bb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad9740c8f246ae55e6efdba7f534f7855"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9740c8f246ae55e6efdba7f534f7855"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>wait</b> (unsigned int delay)</td></tr>
<tr class="separator:ad9740c8f246ae55e6efdba7f534f7855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0759040529df9c11378ca78f910357a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_8c.html#af0759040529df9c11378ca78f910357a">spi_master_init</a> (<a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> mode, <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> clk)</td></tr>
<tr class="memdesc:af0759040529df9c11378ca78f910357a"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes SPI given the mode and clock divider  <a href="#af0759040529df9c11378ca78f910357a">More...</a><br/></td></tr>
<tr class="separator:af0759040529df9c11378ca78f910357a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35fdfb686e89347284004bddca10e563"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a35fdfb686e89347284004bddca10e563"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_8c.html#a35fdfb686e89347284004bddca10e563">spi_begin</a> (<a class="el" href="kstdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> cmdMode, <a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> clk)</td></tr>
<tr class="memdesc:a35fdfb686e89347284004bddca10e563"><td class="mdescLeft">&#160;</td><td class="mdescRight">begin an SPI transaction. should be called before spi_master_transfer() <br/></td></tr>
<tr class="separator:a35fdfb686e89347284004bddca10e563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04052496221261451456558aa472f904"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a04052496221261451456558aa472f904"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_8c.html#a04052496221261451456558aa472f904">spi_end</a> (void)</td></tr>
<tr class="memdesc:a04052496221261451456558aa472f904"><td class="mdescLeft">&#160;</td><td class="mdescRight">end an SPI transaction. should be called after all spi_master_transfer() calls have finished. <br/></td></tr>
<tr class="separator:a04052496221261451456558aa472f904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50084189a01c481aebe4e4d1e1968910"><td class="memItemLeft" align="right" valign="top"><a class="el" href="kstdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi_8c.html#a50084189a01c481aebe4e4d1e1968910">spi_transfer</a> (<a class="el" href="kstdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> data)</td></tr>
<tr class="memdesc:a50084189a01c481aebe4e4d1e1968910"><td class="mdescLeft">&#160;</td><td class="mdescRight">transfers/receives data using SPI  <a href="#a50084189a01c481aebe4e4d1e1968910">More...</a><br/></td></tr>
<tr class="separator:a50084189a01c481aebe4e4d1e1968910"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SPI implementation on rpi 2. </p>
<dl class="section date"><dt>Date</dt><dd>July 20 2015 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Aaron Reyes <a href="#" onclick="location.href='mai'+'lto:'+'are'+'ye'+'s@a'+'nd'+'rew'+'.c'+'mu.'+'ed'+'u'; return false;">areye<span style="display: none;">.nosp@m.</span>s@an<span style="display: none;">.nosp@m.</span>drew.<span style="display: none;">.nosp@m.</span>cmu.<span style="display: none;">.nosp@m.</span>edu</a> </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af0759040529df9c11378ca78f910357a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void spi_master_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="kstdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>clk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initializes SPI given the mode and clock divider </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>the mode (SPI_MODE0, ...1, ...2, ...3) </td></tr>
    <tr><td class="paramname">clk</td><td>the clock rate (SPI_CLK_DIV_...) </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="spi_8h.html#ae8d79f90aba4baa6b37d50653afd3e88">CE0_N</a>, <a class="el" href="spi_8h.html#a4d929e598beed5a61e659180b7a86565">CE1_N</a>, <a class="el" href="gpio_8h.html#a579a3153cf0e486a012d3e59a7945174">gpio_config()</a>, <a class="el" href="gpio_8h.html#a4c2849119e3d80d1f5b0f64ec5b70f4b">GPIO_FUN_ALT0</a>, <a class="el" href="spi_8h.html#a5d3f11f2fdf8a7e27b975291e0c2c8cc">MOSI</a>, and <a class="el" href="spi_8h.html#a1b39f68c76d4942d903c0a16f1882728">SCLK</a>.</p>

</div>
</div>
<a class="anchor" id="a50084189a01c481aebe4e4d1e1968910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="kstdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> spi_transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kstdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>transfers/receives data using SPI </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>the byte to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the byte received </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 8 2016 19:14:13 for 18-349 Kernel by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
